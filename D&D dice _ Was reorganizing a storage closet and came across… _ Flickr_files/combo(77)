YUI.add("hermes-template-sub-photo-comments",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,t,r){return'<a href="#" name="comments"></a>'},3:function(e,a,n,t,r){var o;return"\t<ul class='comments'>\n"+(null!=(o=n.each.call(null!=a?a:{},null!=a?a.comments:a,{name:"each",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r}))?o:"")+"\t</ul>\n"},4:function(e,a,n,t,r){var o;return null!=(o=e.invokePartial(t["sub-photo-comment"],a,{name:"sub-photo-comment",data:r,indent:"\t\t\t",helpers:n,partials:t,decorators:e.decorators}))?o:""},compiler:[7,">= 4.0.0"],main:function(e,a,n,t,r){var o,l=null!=a?a:{};return(null!=(o=n.if.call(l,null!=a?a.isOnMobile:a,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?o:"")+"\n\n"+(null!=(o=n.if.call(l,null!=a?a.comments:a,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r}))?o:"")},usePartial:!0,useData:!0}),t={};e.Array.each(["sub-photo-comment"],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/sub-photo-comments",function(a,r){return r=r||{},r.partials=r.partials?e.merge(t,r.partials):t,n(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-sub-photo-comment"]});YUI.add("hermes-template-sub-photo-comment-form",function(e,t){var a=e.Template.Handlebars.revive({1:function(e,t,a,n,s){var i,l=null!=t?t:{},o=a.helperMissing,r=e.escapeExpression;return'\t\t<div class="comment-icon circle-icon">\n'+(null!=(i=a.if.call(l,null!=(i=null!=(i=null!=t?t.user:t)?i.buddyicon:i)?i.medium:i,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.program(4,s,0),data:s}))?i:"")+'\t\t</div>\n\t\t<div class="comment-form-field">\n\t\t\t<textarea class="new-comment-text" name="comment" placeholder="'+r((a.intlMessage||t&&t.intlMessage||o).call(l,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_A_COMMENT"},data:s}))+'" data-notutorial="'+r((a.intlMessage||t&&t.intlMessage||o).call(l,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_A_COMMENT"},data:s}))+'" data-tutorial="'+r((a.intlMessage||t&&t.intlMessage||o).call(l,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT_TUTORIAL"},data:s}))+'" data-action="comment"></textarea>\n\t\t\t<div class="comment-arrow"></div>\n\t\t\t<textarea class="false-comment-content" tabindex="-1"></textarea>\n'+(null!=(i=(a.isFlipped||t&&t.isFlipped||o).call(l,"enable-emoji-icon",{name:"isFlipped",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?i:"")+"\t\t</div>\n"},2:function(e,t,a,n,s){var i;return'\t\t\t\t<img src="'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=t?t.user:t)?i.buddyicon:i)?i.medium:i,t))+'" width="32" height="32" />\n'},4:function(e,t,a,n,s){var i;return'\t\t\t\t<img src="'+e.escapeExpression(e.lambda(null!=(i=null!=(i=null!=t?t.user:t)?i.buddyicon:i)?i.default:i,t))+'" width="32" height="32" />\n'},6:function(e,t,a,n,s){return'\t\t\t\t<div class="flimoji-icon-wrapper"><svg class="icon icon-check flimoji-icon"><use xlink:href="#icon-check"></use></svg></div>\n'},8:function(e,t,a,n,s){var i,l=null!=t?t:{},o=a.helperMissing;return(null!=(i=(a.isFlipped||t&&t.isFlipped||o).call(l,"enable-signed-out-commenting",{name:"isFlipped",hash:{},fn:e.program(9,s,0),inverse:e.noop,data:s}))?i:"")+"\n"+(null!=(i=(a.isNotFlipped||t&&t.isNotFlipped||o).call(l,"enable-signed-out-commenting",{name:"isNotFlipped",hash:{},fn:e.program(11,s,0),inverse:e.noop,data:s}))?i:"")+"\n"},9:function(e,t,a,n,s){var i=null!=t?t:{},l=a.helperMissing,o=e.escapeExpression;return'\t\t\t<div class="comment-icon circle-icon">\n\t\t\t\t<img src="https://combo.staticflickr.com/pw/images/buddyicon04_m.png" width="32" height="32" />\n\t\t\t</div>\n\t\t\t<div class="comment-form-field">\n\t\t\t\t<textarea class="new-comment-text" name="comment" placeholder="'+o((a.intlMessage||t&&t.intlMessage||l).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_A_COMMENT"},data:s}))+'" data-notutorial="'+o((a.intlMessage||t&&t.intlMessage||l).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_A_COMMENT"},data:s}))+'" data-tutorial="'+o((a.intlMessage||t&&t.intlMessage||l).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT_TUTORIAL"},data:s}))+'" data-action="comment"></textarea>\n\t\t\t\t<div class="comment-arrow"></div>\n\t\t\t\t<textarea class="false-comment-content" tabindex="-1"></textarea>\n\t\t\t</div>\n'},11:function(e,t,a,n,s){return'\t\t\t<div class="comment-form-field is-logged-out">\n\t\t\t\t<a href="#"></a>\n\t\t\t\t<textarea name="comment" disabled placeholder="'+e.escapeExpression((a.intlMessage||t&&t.intlMessage||a.helperMissing).call(null!=t?t:{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_TO_POST_A_COMMENT"},data:s}))+'" data-action="comment"></textarea>\n\t\t\t</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,a,n,s){var i;return'<div class="comments-form">\n'+(null!=(i=a.if.call(null!=t?t:{},null!=t?t.user:t,{name:"if",hash:{},fn:e.program(1,s,0),inverse:e.program(8,s,0),data:s}))?i:"")+"</div>\n"},useData:!0}),n={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/sub-photo-comment-form",function(t,s){return s=s||{},s.partials=s.partials?e.merge(n,s.partials):n,a(t,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-comments-view",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,a,l){var o=null!=n?n:{},s=e.helperMissing,r=t.escapeExpression;return"\t<div class='loadingError'>\n\t\t<p>"+r((e.intlMessage||n&&n.intlMessage||s).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT_LOADING_ERROR"},data:l}))+'</p>\n\t\t<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">'+r((e.intlMessage||n&&n.intlMessage||s).call(o,{name:"intlMessage",hash:{intlName:"common.RETRY"},data:l}))+"</button></p>\n\t</div>\n"},3:function(t,n,e,a,l){var o,s=null!=n?n:{};return"\n\t"+(null!=(o=e.if.call(s,null!=n?n.includePermalink:n,{name:"if",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l}))?o:"")+'\n\t<div class="comments-holder order-chronological photosInComments '+(null!=(o=e.if.call(s,null!=n?n.enableEmojiPicker:n,{name:"if",hash:{},fn:t.program(6,l,0),inverse:t.noop,data:l}))?o:"")+'">\n'+(null!=(o=e.if.call(s,null!=n?n.showMore:n,{name:"if",hash:{},fn:t.program(8,l,0),inverse:t.noop,data:l}))?o:"")+"\n"+(null!=(o=t.invokePartial(a["sub-photo-comments"],n,{name:"sub-photo-comments",data:l,indent:"\t\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+"\n"+(null!=(o=e.if.call(s,null!=n?n.canComment:n,{name:"if",hash:{},fn:t.program(19,l,0),inverse:t.program(22,l,0),data:l}))?o:"")+"\n\t</div>\n"},4:function(t,n,e,a,l){return'<a name="comments"></a>'},6:function(t,n,e,a,l){return"with-emoji-picker"},8:function(t,n,e,a,l){var o;return null!=(o=e.if.call(null!=n?n:{},null!=n?n.viewMoreLinkToPhotoPage:n,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.program(11,l,0),data:l}))?o:""},9:function(t,n,e,a,l){var o,s=null!=n?n:{},r=e.helperMissing,i=t.escapeExpression;return'\t\t\t\t<span class="view-on-photo-page-container">\n\t\t\t\t\t<a href="'+i("function"==typeof(o=null!=(o=e.photoUrl||(null!=n?n.photoUrl:n))?o:r)?o.call(s,{name:"photoUrl",hash:{},data:l}):o)+'#comments">'+i((e.intlMessage||n&&n.intlMessage||r).call(s,{name:"intlMessage",hash:{intlName:"comments.VIEW_ON_PHOTO_PAGE"},data:l}))+"</a>\n\t\t\t\t</span>\n"},11:function(t,n,e,a,l){var o;return"\t\t\t\t<div class='comments-more'>\n"+(null!=(o=e.if.call(null!=n?n:{},null!=n?n.isOnMobile:n,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.program(14,l,0),data:l}))?o:"")+"\t\t\t\t</div>\n"},12:function(t,n,e,a,l){var o;return'\t\t\t\t\t\t<ul class="lines">\n\t\t\t\t\t\t\t<li class="line">\n\t\t\t\t\t\t\t\t<div class="line-icon">\n\t\t\t\t\t\t\t\t\t<svg class="icon icon-comment"><use xlink:href="#icon-comment"></use></svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="line-content">\n\t\t\t\t\t\t\t\t\t<a href=\'#\'>'+t.escapeExpression("function"==typeof(o=null!=(o=e.showMoreString||(null!=n?n.showMoreString:n))?o:e.helperMissing)?o.call(null!=n?n:{},{name:"showMoreString",hash:{},data:l}):o)+"</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n"},14:function(t,n,e,a,l){var o;return'\t\t\t\t\t\t<i class="ui-icon-comments"></i>\n'+(null!=(o=e.if.call(null!=n?n:{},null!=n?n.isTooltipComments:n,{name:"if",hash:{},fn:t.program(15,l,0),inverse:t.program(17,l,0),data:l}))?o:"")},15:function(t,n,e,a,l){var o,s=null!=n?n:{},r=e.helperMissing,i=t.escapeExpression;return'\t\t\t\t\t\t\t\t<a href="'+i("function"==typeof(o=null!=(o=e.photoUrl||(null!=n?n.photoUrl:n))?o:r)?o.call(s,{name:"photoUrl",hash:{},data:l}):o)+'" data-action="follow" >'+i("function"==typeof(o=null!=(o=e.showMoreString||(null!=n?n.showMoreString:n))?o:r)?o.call(s,{name:"showMoreString",hash:{},data:l}):o)+"</a>\n"},17:function(t,n,e,a,l){var o;return"\t\t\t\t\t\t\t\t<a href='#'>"+t.escapeExpression("function"==typeof(o=null!=(o=e.showMoreString||(null!=n?n.showMoreString:n))?o:e.helperMissing)?o.call(null!=n?n:{},{name:"showMoreString",hash:{},data:l}):o)+"</a>\n"},19:function(t,n,e,a,l){var o,s=null!=n?n:{};return(null!=(o=t.invokePartial(a["sub-photo-comment-form"],n,{name:"sub-photo-comment-form",data:l,indent:"\t\t\t",helpers:e,partials:a,decorators:t.decorators}))?o:"")+'\n\t\t\t<button class="ui-button ui-button-cta comment" data-action="comment" '+(null!=(o=e.if.call(s,null!=n?n.showCommentButton:n,{name:"if",hash:{},fn:t.program(20,l,0),inverse:t.noop,data:l}))?o:"")+">"+t.escapeExpression((e.intlMessage||n&&n.intlMessage||e.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.COMMENT"},data:l}))+"</button>\n"},20:function(t,n,e,a,l){return'style="display:block;"'},22:function(t,n,e,a,l){var o;return null!=(o=e.if.call(null!=n?n:{},null!=n?n.isTooltipComments:n,{name:"if",hash:{},fn:t.program(23,l,0),inverse:t.noop,data:l}))?o:""},23:function(t,n,e,a,l){var o;return null!=(o=e.unless.call(null!=n?n:{},null!=(o=null!=n?n.comments:n)?o.length:o,{name:"unless",hash:{},fn:t.program(24,l,0),inverse:t.noop,data:l}))?o:""},24:function(t,n,e,a,l){return'\t\t\t\t<span class="commenting-disabled">'+t.escapeExpression((e.intlMessage||n&&n.intlMessage||e.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"comments.COMMENTING_DISABLED"},data:l}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(t,n,e,a,l){var o;return null!=(o=e.if.call(null!=n?n:{},null!=n?n.loadingError:n,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.program(3,l,0),data:l}))?o:""},usePartial:!0,useData:!0}),a={};t.Array.each(["sub-photo-comments","sub-photo-comment-form"],function(n){var e=t.Template.get("hermes/"+n);e&&(a[n]=e)}),t.Template.register("hermes/sub-photo-comments-view",function(n,l){return l=l||{},l.partials=l.partials?t.merge(a,l.partials):a,e(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-sub-photo-comments","hermes-template-sub-photo-comment-form"]});YUI.add("flickr-photos-comments-addComment-creator",function(e,o){"use strict";e.namespace("ModelCreators")["flickr-photos-comments-addComment"]={run:function(t,m){return e.Promise.all([m.callAPI("flickr.photos.comments.addComment",this._processParams(t)),m.getModelRegistry("person-models"),m.getModelRegistry("comment-models")]).then(this._processResponse,e.FetcherErrorLogger(o))},_processParams:function(o){var t={extras:"icon_urls"};return t.photo_id=o.photoId,t.comment_text=o.commentText,t.expand_bbml=!0,t.use_text_for_links=1,t.secure_image_embeds=1,t.bbml_need_all_photo_sizes=!0,t.primary_photo_longest_dimension=e.config.flickr.comment_image_max_width,t},_processResponse:function(o){var t,m,n=o[0],r=o[1],s=o[2];return t={id:n.comment.author,username:n.comment.authorname,pathAlias:n.comment.pathAlias,realname:n.comment.realname,buddyicon:e.APIHelper.response.removeProtocolFromURL(n.comment.iconurls),isPro:n.comment.ispro,proBadge:n.proBadge,isAdFree:n.comment.isAdFree},m=r.exists(n.comment.author)?r.proxy(n.comment.author):r.add(t),s.add({id:n.comment.id,author:m,date:n.comment.datecreate,permalink:n.comment.permalink,content:n.comment.content,contentRaw:n.comment.rawComment.content,contentSecure:n.comment.secureComment.content})}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("flickr-photos-comments-editComment-updater",function(e,t){"use strict";e.namespace("ModelUpdaters")["flickr-photos-comments-editComment"]={run:function(o,n){return e.Promise.all([n.callAPI("flickr.photos.comments.editComment",this._processParams(o)),n.getModel("comment-models",o.commentId)]).then(this._processResponse,e.FetcherErrorLogger(t))},_processParams:function(t){var o;return o={extras:"icon_urls"},o.comment_id=t.commentId,o.comment_text=t.content,o.expand_bbml=!0,o.full_result=1,o.use_text_for_links=1,o.secure_image_embeds=1,o.bbml_need_all_photo_sizes=!0,o.primary_photo_longest_dimension=e.config.flickr.comment_image_max_width,o},_processResponse:function(e){var t=e[0],o=e[1];return o.setValues({content:t.comment.content,contentRaw:t.comment.rawComment.content,contentSecure:t.comment.secureComment.content}),o}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("flickr-photos-comments-deleteComment-deletor",function(e,o){"use strict";e.namespace("ModelDeletors")["flickr-photos-comments-deleteComment"]={run:function(t,r){var n={};return n.comment_id=t,r.callAPI("flickr.photos.comments.deleteComment",n).then(null,e.FetcherErrorLogger(o))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});