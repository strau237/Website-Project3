YUI.add("hermes-template-mega-limit-overlay-message",function(e,a){var n=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,n,t,l){var s,r=null!=a?a:{},i=n.helperMissing,p=e.escapeExpression;return"<h1>"+p((n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{username:null!=a?a.username:a,intlName:"common.HI_MESSAGE_GREETING"},data:l}))+"</h1>\n<p>\n\t"+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlHTMLMessage||a&&a.intlHTMLMessage||i).call(r,{name:"intlHTMLMessage",hash:{photoCountString:null!=a?a.overLimitCountString:a,rulesUrl:null!=a?a.rulesUrl:a,intlName:"upload-blocking.LIKE_TO_KEEP_YOUR_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n</p>\n<div class="button-container">\n\t<a role="button" class="button unfluid accept-button" href="'+p("function"==typeof(s=null!=(s=n.acceptUrl||(null!=a?a.acceptUrl:a))?s:i)?s.call(r,{name:"acceptUrl",hash:{},data:l}):s)+'">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.JOIN_FLICKR_PRO"},data:l}),{name:"preventOrphans",hash:{},data:l}))+'\n\t</a>\n\t<button class="button unfluid alt decline-button">\n\t\t'+p((n.preventOrphans||a&&a.preventOrphans||i).call(r,(n.intlMessage||a&&a.intlMessage||i).call(r,{name:"intlMessage",hash:{intlName:"upload-blocking.DONT_SAVE_MY_PHOTOS"},data:l}),{name:"preventOrphans",hash:{},data:l}))+"\n\t</button>\n</div>\t\n"},useData:!0}),t={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(t[a]=n)}),e.Template.register("hermes/mega-limit-overlay-message",function(a,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,n(a,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-profile-setProfile-updater",function(e,i){"use strict";e.namespace("ModelUpdaters")["flickr-profile-setProfile"]={run:function(l,r){var t=(function(e){var i={};return i.extras="full_response,expand_bbml,social_urls","profileDescription"===e.field?e.field="description":"website"===e.field&&(e.field="website_url"),i[e.field]=e.value,i})(l);return new e.FlickrPromise({apiResponse:r.callAPI("flickr.profile.setProfile",t),personPublicProfileModel:r.getModel("person-public-profile-models",l.id)}).then(function(e){return(function(e,i,l,r){var t=e.apiResponse,o=e.personPublicProfileModel;if(t){var s=t[l.field],f={stat:t.stat,field:l.field,value:s};return"description"===l.field?(l.field="profileDescription",o.setValue("profileDescription",t.description),o.setValue("profileDescriptionExpanded",t.descriptionExpanded)):"website_url"===l.field?(l.field="website",o.setValue("website",s)):["instagram","facebook","tumblr","pinterest","twitter"].indexOf(l.field)>-1?(o.setValue(l.field,t[l.field]),o.setValue(l.field+"Url",t[l.field+"Url"])):void 0===s?o.setValue(l.field,i[l.field]):o.setValue(l.field,s),f}})(e,t,l)}.bind(this),e.FetcherErrorLogger(i))}}},"@VERSION@",{requires:["flickr-promise"],optional:["person-public-profile-models"]});YUI.add("person-public-profile-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-profile-getProfile"].run(t,this.appContext)},updateField:function(t,r){return e.ModelUpdaters["flickr-profile-setProfile"].run(t,r)}},remoteUpdateDescription:function(e,t,r){return this.setValue(e,"description",t.description),this.remote.updateBioField(t,r)},attributes:{nsid:{readOnly:!0,defaultFn:function(e){return e}},joinedDate:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},showcaseSetId:{defaultValue:"0"},city:{},country:{},firstName:{},lastName:{},hometown:{},email:{},occupation:{},profileDescription:{},profileDescriptionExpanded:{},timezone:{},website:{},facebook:{},facebookUrl:{},instagram:{},instagramUrl:{},tumblr:{},tumblrUrl:{},twitter:{},twitterUrl:{},pinterest:{},pinterestUrl:{},totalViews:{},totalTags:{},totalGeotagged:{},totalFaves:{},totalInGroup:{}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-profile-getProfile-fetcher","flickr-profile-setProfile-updater"]});YUI.add("flickr-profile-getProfile-fetcher",function(e,r){"use strict";e.namespace("ModelFetchers")["flickr-profile-getProfile"]={run:function(t,s){var o=this,i=s.getViewer();return i&&i.signedIn&&(t.id===i.nsid||t.nsid===i.nsid)&&(t.storage=1),new e.FlickrPromise({apiResponse:s.callAPI("flickr.profile.getProfile",this._processParams(t,s),!0),personPublicProfileModelRegistry:s.getModelRegistry("person-public-profile-models")}).then(function(e){return o._processResponse(e,t,s)},e.FetcherErrorLogger(r))},_processParams:function(r,t){var s={datecreate:1};if(s.extras=e.APIHelper.request.getRebootPeopleExtras(),YUI.Env.isServer&&r.id===t.request.probableUser&&(s.storage=1,s.extras+=", classic_user_id, timezone_dst, unified_search_view_pref, photostream_view_order_pref, photostream_view_as_pref, album_view_layout, download_pref",s.extras+=", products_features",s.extras+=", is_minor"),r.extras&&"string"==typeof r.extras&&r.extras.length>0&&(s.extras=s.extras+","+r.extras),r.id)s.user_id=r.id;else{if(!r.pathAlias)throw new Error("`fetch` is missing required params.");s.path_alias=r.pathAlias}return r.storage&&(s.storage=r.storage),s.extras||(s.extras=""),s.extras+=", has_stats,expand_bbml,social_urls",r.hideStats||(s.extras+=",with_stats"),s},_processResponse:function(e,r,t){var s=e.apiResponse,o=e.personPublicProfileModelRegistry,i={};if(s&&s.profile){var a=s.profile,l=s.stats;return i={city:a.city,country:a.country,firstName:a.firstName,lastName:a.lastName,hometown:a.hometown,email:a.email,nsid:a.nsid,id:a.nsid,showcaseSetId:a.showcaseSet||"0",joinedDate:a.join_date,occupation:a.occupation,profileDescription:a.profileDescription,profileDescriptionExpanded:a.profileDescriptionExpanded,website:a.website,twitter:a.twitter,twitterUrl:a.twitterUrl,instagram:a.instagram,instagramUrl:a.instagramUrl,facebook:a.facebook,facebookUrl:a.facebookUrl,tumblr:a.tumblr,tumblrUrl:a.tumblrUrl,pinterest:a.pinterest,pinterestUrl:a.pinterestUrl,totalViews:l?l.photoViews:0,totalTags:l?l.tags:0,totalGeotagged:l?l.geotagged:0,totalFaves:l?l.faves:0,totalInGroup:l?l.groups:0},o.addOrUpdate(i)}}}},"@VERSION@",{requires:["flickr-promise"],optional:["person-models","person-relationship-models","person-preferences-models","person-profile-models","person-public-profile-models","person-groups-models","photostream-models","api-helper"]});YUI.add("photo-list-subview",function(e,t){var r=require("hermes-core/type-validator"),o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.PhotoListSubview=e.Base.create(this.name,e.FlickrView,[],{downloadCacheAndSetImage:function(){e.fluid.loadImage(this.get("photoUrl"),{timeout:1e3,retry:!0}).then(function(e){this.handleImageLoad(!0,e)}.bind(this),function(e){this.handleImageLoad(!1,e+"?retry="+Date.now())}.bind(this))},handleImageLoad:function(t,r){var o=this.get("photoContainer");o.setStyle("backgroundImage","url("+r+")"),t||o.setStyle("backgroundColor","#eee"),this.get("model").getValue("needsInterstitial")&&o.addClass("restricted-image"),e.fluid.chill(function(){this.fire(t?"loaded":"loadError")},this)},updateGeometry:function(e){e?this.set("layoutItem",e):e=this.get("layoutItem"),this.updateNodeGeometry(e,this.get("container"))},updateNodeGeometry:function(t,r){YUI.Env.isServer?r.setStyles({transform:"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-webkit-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)","-ms-transform":"translate("+t.geometry.left+"px, "+t.geometry.top+"px)"}):e.fluid.setStylePrefixed("transform","translate("+t.geometry.left+"px, "+t.geometry.top+"px)",r),t.forcedAspectRatio&&r.addClass("forced-aspect-ratio"),r.setStyles({width:t.geometry.width+"px",height:t.geometry.height+"px"})}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(e,t){return r.photoId(e)}},layoutItem:{validator:function(e,t){return"object"==typeof e&&e.hasOwnProperty("aspectRatio")&&e.hasOwnProperty("geometry")&&"object"==typeof e.geometry&&e.geometry.hasOwnProperty("width")&&e.geometry.hasOwnProperty("height")&&e.geometry.hasOwnProperty("top")&&e.geometry.hasOwnProperty("left")&&e.hasOwnProperty("isAwake")}},listModelParams:{writeOnce:"initOnly"},photoUrl:{value:"/images/spaceball.gif",getter:function(e,t){var r=this.get("model"),o=this.get("layoutItem");return r.getSizeToFit({width:o.geometry.width*this.get("photoContainerSize"),height:o.geometry.height*this.get("photoContainerSize")},{includeSquare:!1}).url}},linkedPageUrl:{writeOnce:!0,validator:function(t,r){return e.AttributeHelpers.validateString(t)}},model:{value:null},photoContainer:{readOnly:!0,derivedBy:["container"],getter:function(e){return YUI.Env.isServer?(o.warn("Cannot access photoContainer on the server; set values in the template instead. Falling back to view container."),this.get("container")):this.get("container").one(".photo")}},photoContainerSize:{value:1},measureAFT:{value:!1,validator:function(t,r){return e.AttributeHelpers.validateBoolean(t)}}}})},"@VERSION@",{requires:["flickr-view","attribute-helpers"],optionalRequires:["fluid"]});YUI.add("hermes-template-pro-badge",function(n,a){var e=n.Template.Handlebars.revive({1:function(n,a,e,l,r){var s;return null!=(s=(e.ifCond||a&&a.ifCond||e.helperMissing).call(null!=a?a:{},null!=a?a.badgeType:a,"===","legacy",{name:"ifCond",hash:{},fn:n.program(2,r,0),inverse:n.program(15,r,0),data:r}))?s:""},2:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new pro-badge-legacy'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'" title="'+n.escapeExpression((e.intlMessage||a&&a.intlMessage||e.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"common.FLICKR_LOVES_OLD_SCHOOL_PROS"},data:r}))+'">\n'+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(11,r,0),inverse:n.program(13,r,0),data:r}))?s:"")+"\t\t</a>\n"},3:function(n,a,e,l,r){return'href="/account/upgrade/pro"'},5:function(n,a,e,l,r){return" no-link"},7:function(n,a,e,l,r){return" light"},9:function(n,a,e,l,r){var s;return" "+n.escapeExpression("function"==typeof(s=null!=(s=e.extraClasses||(null!=a?a.extraClasses:a))?s:e.helperMissing)?s.call(null!=a?a:{},{name:"extraClasses",hash:{},data:r}):s)},11:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge"><use xlink:href="#icon-old-pro-badge-colorless"></use></svg>\n'},13:function(n,a,e,l,r){return'\t\t\t\t<svg class="icon icon-old-pro-badge-color"><use xlink:href="#icon-old-pro-badge"></use></svg>\n'},15:function(n,a,e,l,r){var s,i=null!=a?a:{};return"\t\t<a "+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.noop,inverse:n.program(3,r,0),data:r}))?s:"")+' class="pro-badge-new'+(null!=(s=e.if.call(i,null!=a?a.noLink:a,{name:"if",hash:{},fn:n.program(5,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.light:a,{name:"if",hash:{},fn:n.program(7,r,0),inverse:n.noop,data:r}))?s:"")+(null!=(s=e.if.call(i,null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">\n\t\t\t<svg class="icon icon-pro-badge"><use xlink:href="#icon-pro-badge"></use></svg>\n\t\t</a>\n'},17:function(n,a,e,l,r){var s;return'\t<a href="/account/upgrade/pro" class="pro-badge-inline'+(null!=(s=e.if.call(null!=a?a:{},null!=a?a.extraClasses:a,{name:"if",hash:{},fn:n.program(9,r,0),inverse:n.noop,data:r}))?s:"")+'">PRO</a>\n'},compiler:[7,">= 4.0.0"],main:function(n,a,e,l,r){var s;return null!=(s=(e.isFlipped||a&&a.isFlipped||e.helperMissing).call(null!=a?a:{},"enable-pro-badge-toggle",{name:"isFlipped",hash:{},fn:n.program(1,r,0),inverse:n.program(17,r,0),data:r}))?s:""},useData:!0}),l={};n.Array.each([],function(a){var e=n.Template.get("hermes/"+a);e&&(l[a]=e)}),n.Template.register("hermes/pro-badge",function(a,r){return r=r||{},r.partials=r.partials?n.merge(l,r.partials):l,e(a,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-comment-item-view",function(t,n){var a=t.Template.Handlebars.revive({1:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},3:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t<a class="avatar person tiny no-menu" style="background-image: url('+i(s(null!=(r=null!=n?n.author:n)?r.buddyicon:r,n))+');" href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/"></a>\n'},5:function(t,n,a,e,l){var r,s=t.escapeExpression;return'\t\t\t\t\t<span class="deleted">'+s(t.lambda(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+" ("+s((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"common.DELETED_USER"},data:l}))+")</span>\n"},7:function(t,n,a,e,l){var r,s=t.lambda,i=t.escapeExpression;return'\t\t\t\t\t<a href="/photos/'+i(s(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'/" class="author-name" >'+i(s(null!=(r=null!=n?n.author:n)?r.displayname:r,n))+"</a>\n"},9:function(t,n,a,e,l){var r;return null!=(r=t.invokePartial(e["pro-badge"],n,{name:"pro-badge",hash:{badgeType:null!=(r=null!=n?n.author:n)?r.proBadge:r},data:l,indent:"\t\t\t\t\t",helpers:a,partials:e,decorators:t.decorators}))?r:""},11:function(t,n,a,e,l){return t.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{time:null!=n?n.time:n,intlName:null!=n?n.intlName:n},data:l}))},13:function(t,n,a,e,l){var r;return null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasEditPrivileges:n,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.program(16,l,0),data:l}))?r:""},14:function(t,n,a,e,l){return'\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="owner">\n\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t</a>\n'},16:function(t,n,a,e,l){var r;return'\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t\t\t</a>\n'+(null!=(r=a.if.call(null!=n?n:{},null!=n?n.hasOnlyDeletePrivileges:n,{name:"if",hash:{},fn:t.program(17,l,0),inverse:t.noop,data:l}))?r:"")},17:function(t,n,a,e,l){return'\t\t\t\t\t\t\t\t<a role="button" class="comment-action comment-action-menu-button" data-menutype="curator">\n\t\t\t\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t\t\t\t</a>\n'},19:function(t,n,a,e,l){var r;return'\t\t\t\t\t<a role="button" class="comment-action comment-action-reply-button" data-action="reply" data-pathalias="'+t.escapeExpression(t.lambda(null!=(r=null!=n?n.author:n)?r.pathAlias:r,n))+'">\n\t\t\t\t\t\t<svg class="icon icon-comment_reply"><use xlink:href="#icon-comment_reply"></use></svg>\n\t\t\t\t\t</a>\n'},compiler:[7,">= 4.0.0"],main:function(t,n,a,e,l){var r,s,i=null!=n?n:{},o=a.helperMissing,u=t.escapeExpression;return'<div class="comment-item" data-id="'+u("function"==typeof(s=null!=(s=a.id||(null!=n?n.id:n))?s:o)?s.call(i,{name:"id",hash:{},data:l}):s)+'">\n\n'+(null!=(r=a.if.call(i,null!=(r=null!=(r=null!=n?n.author:n)?r.buddyicon:r)?r.default:r,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.program(3,l,0),data:l}))?r:"")+'\n\t<div class="content-container">\n\t\t<header>\n\t\t\t<div class="author-info">\n'+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isDeleted:r,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l}))?r:"")+"\n"+(null!=(r=a.if.call(i,null!=(r=null!=n?n.author:n)?r.isPro:r,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l}))?r:"")+'\n\t\t\t\t<span class="comment-date">'+(null!=(r=(a.friendlySinceDate||n&&n.friendlySinceDate||o).call(i,null!=n?n.timeago:n,!0,!1,{name:"friendlySinceDate",hash:{},fn:t.program(11,l,0),inverse:t.noop,data:l}))?r:"")+'</span>\n\t\t\t</div>\n\n\t\t\t<div class="comment-actions">\n'+(null!=(r=a.if.call(i,null!=n?n.isSignedIn:n,{name:"if",hash:{},fn:t.program(13,l,0),inverse:t.program(19,l,0),data:l}))?r:"")+'\n\t\t\t</div>\n\t\t</header>\n\n\t\t<div class="comment-content">'+u((a.renderTrustedMarkupWithLineBreaks||n&&n.renderTrustedMarkupWithLineBreaks||o).call(i,null!=n?n.contentSecure:n,{name:"renderTrustedMarkupWithLineBreaks",hash:{},data:l}))+"</div>\n\t</div>\n</div>\n"},usePartial:!0,useData:!0}),e={};t.Array.each(["pro-badge"],function(n){var a=t.Template.get("hermes/"+n);a&&(e[n]=a)}),t.Template.register("hermes/comment-item-view",function(n,l){return l=l||{},l.partials=l.partials?t.merge(e,l.partials):e,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-pro-badge"]});